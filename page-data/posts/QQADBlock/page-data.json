{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/QQADBlock","result":{"data":{"markdownRemark":{"id":"70f952a8-6536-5124-8b8b-bf90f19bb713","html":"<p>昨天收到微博运营同事的消息说，不止一位用户在微博中反映，我们站点的所有主要页面的中间内容区域呈空白状，换了几个浏览器都是这样。</p>\n<p>本来是优先报给运维部门的，也拉上了我前端。点开微博挨个看了下，发现其中一个用户在回复时提到了自己的QQ。遂主动加了好友帮助排查问题，步骤：</p>\n<ol>\n<li>换浏览器，问题依旧；</li>\n<li>开Chrome内核浏览器（用户用的搜狗），开控制台，勾选禁用JS看效果，问题依旧；</li>\n<li>Ctrl＋U，将源代码复制出来，存纯文本，发了过来代码一切正常；</li>\n<li>开控制台，Elements工具，右键选中<code class=\"language-text\">&lt;html&gt;</code>点Copy，粘贴为文本文档发来我看，此时发现了问题</li>\n</ol>\n<p>在浏览器渲染结果后的代码中，<code class=\"language-text\">&lt;body&gt;</code>上面出现了</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>text/css<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\"><span class=\"token selector\">.advbox,.subbox_adv,.subadv2,[class^=\"advbox\"],.advarticle,.serve</span><span class=\"token punctuation\">{</span><span class=\"token property\">display</span><span class=\"token punctuation\">:</span>none <span class=\"token important\">!important</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span><span class=\"token selector\">div[class=\"row\"],div[class=\"advbox pa-b20\"],div[class=\"advbox\"],div[id=\"tmadvtip\"]</span><span class=\"token punctuation\">{</span><span class=\"token property\">display</span><span class=\"token punctuation\">:</span>none <span class=\"token important\">!important</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>一行被注入的样式代码，其中的规则一看就是针对autohome广告的屏蔽代码，但其中有<code class=\"language-text\">div[class=&quot;row&quot;]</code>这么个规则。这个class是我们PC全站使用的CSS Grid布局中最基础的一个类，导致了几乎所有PC站点内容部分被当作广告误杀了。</p>\n<p>锁定问题后，为了再度确认，我们自己安装QQ管家，但没有发现这个情况，与客户再度确认后确实是因为QQ管家导致这个问题，且用户使用的是<em>11.0.16779.224测试版</em>，最新的正式版则没有这个问题。</p>\n<p>关于此次事件，体会最深的是<strong>做事的态度</strong>，在群里拉了好多人分析问题甚至是踢皮球，远不如直接去联系客户，最快速地判定问题点，迅速出台解决方案，这也是汽车之家一直以来贯彻的企业文化。</p>\n<p>准备周末的周例会上给大家分享下这次事件，给大家涨涨经验，更是一个再度强调企业文化的好机会。</p>","fields":{"slug":"/posts/QQADBlock","tagSlugs":["/tag/杂谈/","/tag/工作/"]},"frontmatter":{"date":"2015-10-21","description":"昨天收到微博运营同事的消息说，不止一位用户在微博中反映，我们站点的所有主要页面的中间内容区域呈空白状，换了几个浏览器都是这样。本来是优先报给运维部门的，也拉上了我前端。点开微博挨个看了下，发现其中一个用户在回复时提到了自己的QQ。遂主动加了好友帮助排查问题，步骤：","tags":["杂谈","工作"],"title":"线上Bug，主动出击！","socialImage":null}}},"pageContext":{"slug":"/posts/QQADBlock"}}}